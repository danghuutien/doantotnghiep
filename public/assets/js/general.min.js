function validForm(e){var t=!0;return $(".err_show").removeClass("active"),$("#"+e+" .form-control").each(function(){$(this).attr("name");$(this).css({border:"1px solid #d5d5d5"}).css({visibility:"visible"}),""==$(this).val()&&($(this).focus(),$(this).parent().find(".err_show.null").addClass("active"),$(this).css({border:"2px solid #dc1f26"}).css({visibility:"visible"}),t=!1),""==$(this).val()||"email"!=$(this).attr("name")||isEmail($(this).val())||($(this).parent().find(".err_show.email").addClass("active"),$(this).css({border:"2px solid #dc1f26"}).css({visibility:"visible"}),t=!1),""==$(this).val()||"phone"!=$(this).attr("name")||isPhone($(this).val())||($(this).parent().find(".err_show.phone").addClass("active"),$(this).css({border:"2px solid #dc1f26"}).css({visibility:"visible"}),t=!1),0==$(this).val()&&"product_name"==$(this).attr("name")&&($(this).parent().find(".err_show").addClass("active"),$(this).css({border:"2px solid #dc1f26"}).css({visibility:"visible"}),t=!1)}),t}function isEmail(e){return/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e)}function isPhone(e){return/((09|03|07|08|05)+([0-9]{8})\b)/g.test(e)}function loadingBox(e="open"){"open"==e?$("#loading_box").css({visibility:"visible",opacity:0}).animate({opacity:1},200):$("#loading_box").animate({opacity:0},200,function(){$("#loading_box").css("visibility","hidden")})}function alert_show(e="success",t=""){$("#toast-container .toast").addClass("toast-"+e),$("#toast-container .toast div").text(t),$("#toast-container").css("display","block"),setTimeout(function(){$("#toast-container").css("display","none"),$("#toast-container .toast").removeClass("toast-"+e),$("#toast-container .toast div").text("")},2e3)}function contact(e,t){if(1==validForm(e)){var o=$("#"+e+' input[name="name"]').val(),i=$("#"+e+' input[name="phone"]').val(),n=$("#"+e+' input[name="email"]').val(),a=$("#"+e+' textarea[name="content"]').val();$.ajax({url:"/ajax/contact",method:"POST",data:{name:o,phone:i,email:n,content:a,type:t},beforeSend:function(){loadingBox("open")},success:function(t){$("#"+e+" .form-control").val(""),$("#"+e+" input[name=email").val(""),1==t.status&&setTimeout(function(){loadingBox("close"),alert_show("success",t.message)},3e3)},error:function(e){loadingBox("close"),alert_show("error",$("#loading_box").data("error"))}})}}function update_url(e){history.pushState(null,null,e)}function pushOrUpdate(e){var t=new URL(window.location.href);$.each(e,function(e,o){t.searchParams.set(e,o)});update_url(t.href)}function getUrlParameter(e,t){var o=new RegExp("[?&]"+t+"=([^&#]*)").exec(e);return null==o?null:decodeURI(o[1])||null}function checkEmpty(e){return null==e||("null"==e||(void 0==e||(""==e||e==[])))}function loadAjaxGetPaginate(e,t,o){checkEmpty(o)&&(o="progress");var i={beforeSend:function(){},success:function(e){},error:function(e){}};$.extend(i,t),$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},type:"POST",url:e,beforeSend:function(){loadingBox("open")},success:function(e){loadingBox("close"),i.success(e)},error:function(e){loadingBox("close"),alert("Có lỗi xảy ra. Vui lòng thử lại!","error"),i.error(e)}})}function loadData(e=null,t="progress"){null===e&&(e=window.location.href),loadAjaxGetPaginate(e,{beforeSend:function(){},success:function(e){"append"===e.type?$("#listdata .product_list__bottom").append(e.html):($("#listdata .product_list__bottom").empty(),$("#listdata .product_list__bottom").append(e.html)),$("#listdata .list-order").empty(),$("#listdata .list-order").append(e.html),$("#listdata .list").empty(),$("#listdata .list").append(e.html),$(".filter-result").empty(),$(".filter-result").append(e.html_result),$(".filter-list__item").removeClass("show"),$(".perpage").empty(),$(".perpage").append(e.pagination)},error:function(e){}},t)}function loadUrl(e,t){var o=$("#search_url").val();string=e+"="+t;var i="",n="";if(-1!=o.lastIndexOf(e))if(-1!=o.lastIndexOf(string)&&("priceSort"==e||"sort"==e)||e.includes("filter"))n=i=(i=(i=o.replace("?"+string+"&","?")).replace("&"+string,"")).replace("?"+string,"");else{var a=(i=o.split(e))[1].split("&");n=void 0!=a[1]?i[0]+string+"&"+a[1]:i[0]+string}else n=-1!=o.lastIndexOf("?")?o+"&"+string:o+"?"+string;$("#search_url").val(n),loadData(n)}function loadDestination(e,t,o,i,n){loadingBox("open");var a=$(e).val();""==a?(loadingBox("close"),alert_show("error",i)):$.ajax({type:"POST",cache:!1,url:t,data:{id:a,type:n},success:function(t){$(o).empty(),$(o).html(t),loadingBox("close"),"#district_id"==e&&$("#payment_cart").length>0&&shippingFee()},error:function(e){loadingBox("close"),alert_show("error",$("#loading_box").data("error"))}})}function formComment(e){if(validForm(e)){var t=$("#"+e+' input[name="phone"]').val(),o=$("#"+e+' input[name="name"]').val(),i=$("#"+e+' textarea[name="content"]').val(),n=$("#"+e+' input[name="type"]').val(),a=$("#"+e+' input[name="type_id"]').val(),s=$("#"+e+' input[name="vote"]').val(),l=$("#"+e+' input[name="data_id"]').val();if(0==s)return alert_show(n="error","Chưa chọn số sao đánh giá"),$("#"+e).on("submit",function(e){e.preventDefault()}),!1;var r={name:o,phone:t,content:i,type_id:a,type:n,vote:s,data_id:l};$.ajax({method:"POST",url:"/ajax/formComment",dataType:"json",data:r,beforeSend:function(){loadingBox("open")},success:function(t){setTimeout(function(){loadingBox("close")},800),alert_show(t.type,t.message),console.log(t),"1"==t.status&&setTimeout(function(){$(".comments > ul").prepend(t.html),$(".votes_form_button").show(),$(".votes .votes_form_add").slideToggle(),"posts"==n&&($(".comments > ul").show(),$(".comments_title").text("Bình luận của người dùng"))},1e3),"2"==t.status&&setTimeout(function(){$(".comment"+t.parent_id+" .comment-child").prepend(t.html),$(".comments > ul .reply").slideUp("slow")},2e3),setTimeout(function(){$("."+e+" input.input_field").val(""),$("."+e+" textarea.input_field").val("")},3e3)},error:function(e){loadingBox("close"),alert_show(n="error","Có lỗi xảy ra, vui lòng thử lại !")}})}return $("#"+e).on("submit",function(e){e.preventDefault()}),!1}function addCompare(e,t,o,i,n){$.ajax({url:"/ajax/add-compare",type:"POST",data:{id:e,name:t,image:o,price:i,cate_id:n},beforeSend:function(){},success:function(e){$("#show_compare").empty(),$("#show_compare").append(e.html),$("#show_compare").css("display","block"),1==e.status||alert_show(type="error",e.message)},error:function(e){}})}function removeCompare(e,t="single"){$.ajax({url:"/ajax/remove-compare",type:"POST",data:{id:e,page:t},beforeSend:function(){},success:function(e){"compare"==t&&(window.location.href=e.link),$("#show_compare").empty(),$("#show_compare").append(e.html),$("#show_compare").css("display","block")},error:function(e){}})}function TextToAlias(e){return e?e.replace(/[áàảãạâấầẩẫậăắằẳẵặ]/gi,"a").replace(/[đ]/gi,"d").replace(/[éèẻẽẹêếềểễệ]/gi,"e").replace(/[íìỉĩị]/gi,"i").replace(/[óòỏõọôốồổỗộơớờởỡợ]/gi,"o").replace(/[ýỳỷỹỵ]/gi,"y").replace(/[úùủũụưứừửữự]/gi,"u").replace(/\s+/gi,"-").replace(/[-]+/gi,"-").replace(/^[-]+|[-]+$/gi,"").replace(/[^a-z0-9-]/gi,"").toLowerCase():""}function filTXT(){$(".store-item").css("display","block").removeClass("none");var e=$.trim($("#suggest_shop").val()).toLowerCase(),t=TextToAlias(e);e.length>0?($(".store-item").each(function(){var o=$(this).text().toLowerCase();-1!=o.indexOf(e)||-1!=TextToAlias(o).indexOf(t)?$(this).css("display","block"):$(this).addClass("none").css("display","none")}),$(".view-more-filter-left").hide()):($(".filter-group.provinces >.field-check").each(function(){$(this).css("display","")}),$(".view-more-filter-left").show()),$(".list-store").each(function(){let e="";$(this).find(".store-item.none").each(function(){let t=$(this).data("map");e+='<div class="list-item bottom-list__item store-item none" style="display: none;" data-map=\''+t+"/'"+$(this).html()+"</div>"}),$(this).find(".store-item.none").remove(),$(this).append(e)})}$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$(document).ready(function(){if($(".adminbar").length>0)$(".adminbar").height();else;$(window).scroll(function(){if($(this).scrollTop()>100){$(".header-bottom").height(),$(".header-bottom").height();$(".header-bottom").addClass("menu_fixel"),$(".menu_home").removeClass("none"),$(".menu_level1").addClass("scroll_menu")}else $(".header-bottom").removeClass("menu_fixel"),$(".menu_home").addClass("none"),$(".menu_level1").removeClass("scroll_menu")}),$("body").on("click",".faq_item .faq_item__qs",function(){$(this).parent().toggleClass("active")}),$("body").on("click","#compare-close",function(e){$("#show_compare").css("display","none")}),$("body").on("click",".questions-content__list .item",function(){console.log("a"),$(this).hasClass("active")?$(".questions-content__list .item").removeClass("active"):($(".questions-content__list .item").removeClass("active"),$(this).addClass("active"))}),$("body").on("click",".pagination__numbers .page-link",function(e){e.preventDefault();loadData($(this).attr("data-href")),$("html, body").stop().animate({scrollTop:$("#listdata").position().top},1)}),$("body").on("click",".menu-icon",function(){$("#overlay-menu-mobile").addClass("active"),$(this).closest(".header_mobile").find(".header_mobile__menu").addClass("active")}),$("body").on("click",".menu-close",function(){$("#overlay-menu-mobile").removeClass("active"),$(this).closest(".header_mobile").find(".header_mobile__menu").removeClass("active")}),$("body").on("click","#overlay-menu-mobile",function(){$(this).removeClass("active"),$(".header_mobile .header_mobile__menu").removeClass("active")}),$("body").on("click",".menu_item .icon-down.icon-down-lv1",function(){$(this).toggleClass("active"),$(this).parent().find(".list_child2").slideToggle()}),$("body").on("click",".menu_item .list_child2 .icon-down",function(){$(this).toggleClass("active"),$(this).parent().find(".list_child3").slideToggle()}),$("body.page-view .menu_level1").hover(function(){$(this).addClass("active")},function(){$(this).removeClass("active")}),$("body .menu_level1 .submenu").mouseover(function(){$(this).closest("li").addClass("active")}),$("body .menu_level1 .submenu").mouseleave(function(){$(this).closest("li").removeClass("active")}),$("body").on("click",".find-store",function(){filTXT(),$(this).parent().find("input").val("")}),$(".form-control").on("click keyup",function(e){$(this).css({border:"1px solid #B6B6B6"}).css({visibility:"visible"}),$(this).parent().find(".err_show").removeClass("active")}),$("body").on("click",".add-to-cart",function(e){if($(this).hasClass("noClick"))return alert_show("error","Xin lỗi, Sản phẩm tạm hết hàng!"),!1;let t=$(this).data("productid"),o=$(this).data("type");loadingBox("open"),$.ajax({type:"post",url:"/ajax/add-to-cart",data:{productId:t,type:o},success:function(e){$(".cart-count").text(e.count),$(".cart-price").text(e.price),alert_show(e.type,e.message),loadingBox("close"),e.redirect&&""!=e.redirect&&setTimeout(function(){window.location.href=e.redirect},500)},error:function(e){loadingBox("close"),alert_show("error","Có lỗi xảy ra vui lòng thử lại!")}})}),$("body").on("click","#more_post_search a",function(){var e={id:$(this).data("id")};$.ajax({method:"POST",url:"/ajax/load_post_search",dataType:"json",data:e,beforeSend:function(){loadingBox("open")},success:function(e){setTimeout(function(){loadingBox("close")},800),"1"==e.status&&($("#more_post_search").remove(),$(".search_posts__list").append(e.html))},error:function(e){loadingBox("close"),alert_show(type="error","Có lỗi xảy ra, vui lòng thử lại !")}})})}),$(".css-content .mce-toc >h2 img").length>0?$("body").on("click",".css-content .mce-toc >h2 img",function(){$(this).parent().parent().find(">ul").slideToggle()}):$("body").on("click",".css-content .mce-toc >h2",function(){$(this).css("cursor","pointer"),$(this).parent().find(">ul").slideToggle()});